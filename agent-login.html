<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Access - Smart System</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #1a5276; --bg: #f4f7f6; }
        body { font-family: 'Kanit', sans-serif; background: var(--bg); display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; font-weight: 300; }
        .login-card { background: white; padding: 40px; border-radius: 30px; box-shadow: 0 15px 40px rgba(0,0,0,0.1); width: 100%; max-width: 350px; text-align: center; }
        input { width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #ddd; margin-bottom: 20px; font-family: 'Kanit'; text-align: center; font-size: 1.2rem; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 12px; cursor: pointer; font-family: 'Kanit'; font-size: 1rem; }
    </style>
</head>
<body>
<div class="login-card">
    <i class="fas fa-user-tie fa-3x" style="color:var(--primary); margin-bottom:20px;"></i>
    <h2 style="font-weight:400; margin-bottom:10px;">Agent Sovereign</h2>
    <p style="color:#777; font-size:0.9rem; margin-bottom:30px;">ระบุรหัส PIN เพื่อเข้าสู่แผงควบคุม</p>
    <input type="password" id="agentPin" placeholder="รหัส PIN 4 หลัก" maxlength="4">
    <button onclick="handleLogin()">เข้าสู่ระบบมหาอำนาจ</button>
    <div id="error" style="color:red; margin-top:15px; display:none; font-size:0.85rem;">รหัส PIN ไม่ถูกต้อง</div>
</div>
<script>
    const api = "https://script.google.com/macros/s/AKfycbyd68dXse7OuwzfIRgHYDRIGHRQPIXnYOBK2fxHTqeJoYQYLYbP2HZkOGUaPxIaahIS/exec";
    async function handleLogin() {
        const pin = document.getElementById('agentPin').value;
        const res = await fetch(`${api}?action=agentLogin&pin=${pin}`);
        const data = await res.json();
        if(data.success) {
            localStorage.setItem('agentPin', pin);
            window.location.href = 'agent-dashboard.html';
        } else {
            document.getElementById('error').style.display = 'block';
        }
    }
</script>
</body>
</html>
